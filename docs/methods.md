# Methods

## Adaptive Automation System

The ACT-R driving simulation made by Salvucci (2006) served as a ready-to-use autonomous driving system and was adapted to allow for human input. The three possible LoA were: "Driver control", where no part of the driving task was automated; "Cruise control", where speed control was automated but steering was still performed by the driver; And "Passenger mode", where both steering and speed control was automated. The driver was notified of the current LoA by text on a head-up display (HUD), which also showed the current speed limit if the driver deviated from that limit by more than ten percent.

The AAS relied on changes in the pupil size to maintain an estimate of the mental workload currently experienced by the user (Kahneman, 1973). The system, which was inspired from previous work by Mindakis and Lohan (2018), monitored the root mean square error (RMSE) between the average pupil size during the last 600 samples (short-term pupil trend) and the average pupil size during the last 15000 samples (long-term pupil trend). The system scheduled an automation increase, in case the short-term pupil trend measure exceeded 1.15 * the RMSE. Subsequently, once the short-term pupil trend returned to the long-term pupil trend, the system scheduled an automation decrease. After every automation change participants received a warning (i.e. blinking text on the HUD) that the system would change the level of automation in 5 seconds. Following this change, no subsequent change to the automation level was permitted for additional 10 seconds.

An EyeLink Portable Duo eye-tracking system (SR Research) was utilized to measure changes in the pupil size at 500 HZ. Samples were recorded for later offline analysis and made available online to the AAS. The remote tracking functionality of the eye-tracking system was used and only the participants' left eye was recorded. Obtained samples that contained a pupil size value of zero were not taken into account by the AAS.

## Participants

We recruited eight participants, all of them either students or employees of the University of Groningen. Not all the participants owned a driving license, as the simulation vehicle was simple enough to operate without one. Before the experiment started, participants were told they were participating in a driving experiment involving adaptive automation based on their pupil size. We also explained the details of the secondary task and that they were expected to stay in the right lane, to stick to the center of the lane, and to not deviate from the speed limits.

## Experiment
The driving experiment consisted of two experimental within-subjects conditions: aided and unaided. Both conditions initially started in full automation mode and handed back control to the driver after 13 seconds. For every condition, participants then performed a 10-minute driving session. In the aided condition the AAS was enabled for the remaining session, while in the unaided condition the driver remained in full control of the vehicle for the remaining session.

The mental workload on the driver was manipulated with a secondary task in both conditions to test whether the AAS would take over control in appropriate moments, as well as how the increase in automation would impact the driver. The secondary task required solving multiplication problems involving two numbers that could each range from 10 up to and including 21. The problems were presented to the participants aurally, with a text-to-speech synthesizer, allowing participants to keep watching the road. Participants were instructed to respond to the problems verbally. Periods in which the participants were required to perform the secondary task alternated with periods within which they had to focus solely on driving. Specifically, every session contained two 2.5-minute periods without a secondary task, and two 2.5-minute periods with a secondary task (see Figure X). During each 2.5-minute secondary task period participants had to answer ten questions, meaning that they had fifteen second to hear and answer to each multiplication problem. Two different lists of twenty multiplication problems were created; one for each session. The order in which the lists were presented was counterbalanced across subjects. Similarly, to prevent any effects of learning or practice, we also counterbalanced the order of the aided/unaided conditions across participants.

![experiment set-up](images/experiment_set-up.png "Experiment set-up")


| Session 1 (automation condition) | Session 2 (automation condition) | Session 1 (multiplication list) | Session 2 (multiplication list) |
|----------------------------------|----------------------------------|---------------------------------|---------------------------------|
| Aided                            | Unaided                          | List 1                          | List 2                          |
| Aided                            | Unaided                          | List 2                          | List 1                          |
| Unaided                          | Aided                            | List 1                          | List 2                          |
| Unaided                          | Aided                            | List 2                          | List 1                          |

## Analysis
For the pre-processing and offline analysis of the pupil data we relied on the recommendations by van Rij et al. (2019). First, blink artifacts were removed from the raw data. Subsequently, three different additive mixed effect models (Wood, 2017) were fitted. The first model was used to investigate for each condition ("aided" vs. "unaided") how the pupil size changed over the duration of the entire session. The second model was used to estimate for each condition ("aided" vs. "unaided") how the pupil size changed following a multiplication problem. Finally, the third model was used to estimate how the pupil size changed following an increase in automation. Every model included a smooth term to model the effect of gaze location on the size of the pupil (van Rij et al., 2019) to account for the necessity of eye-movements during the experiment.

The baseline value, that was subtracted from each subject's pupil data (van Rij et al., 2019), used to fit the first model was obtained by calculating for each subject the average over all samples in a 400 ms window starting 200 ms before full control was handed to the driver at the beginning of the experiment. For the second model the average computed for each subject over both experimental sessions ("aided" vs. "unaided") was used as baseline value. Finally, for the third model the average computed for each subject over the samples within the 200 ms following a change in automation was taken as baseline value. The pupil data used for all models was subsequently down-sampled to 50 HZ (van Rij et al., 2019).

To analyse the effect of the session condition on secondary task performance, a generalized linear mixed effect model (Faraway, 2016), for a binomial regression, was fitted. The response variable was a binary value indicating either a correct or incorrect response given for a multiplication problem. The fixed effect predictor was the session condition ("aided" vs. "unaided"). A random intercept per participant was included to account for inter-individual differences.


## experiment (alternative)

The driving experiment consisted of two experimental within-subjects conditions: aided and unaided. Both conditions initially started in full automation mode and handed back control to the driver after 13 seconds. For every condition, participants then performed a 10-minute driving session. In the aided condition the AAS was enabled for the remaining session, while in the unaided condition the driver remained in full control of the vehicle for the remaining session.

We manipulated the MWL on the driver in both conditions to test whether the adaptive automation system took over control in appropriate moments, as well as how the increase in automation would impact the driver. Workload was manipulated by having the participant solve multiplication problems. The problems were presented to the participants aurally, with a text-to-speech synthesizer, to which they responded by voicing their response. Periods with and without the secondary task alternated in 2.5 minutes periods (Figure~\ref{fig:exp}), starting without the multiplication problems. During each secondary task period participants had to answer ten questions, meaning that they had fifteen second to hear and answer to each multiplication problem, resulting in a total of 20 questions per session. The order of the conditions and the lists of question were counterbalanced to control for any learning effects and difference in list difficulty.
